{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>NOTE: The products, business entities, and data used in this document are completely fictional. The products, and their associated code, were designed with assistance from Google Gemini. John Stonecypher wrote this document solely to showcase his skills in API Documentation and \"Docs-as-Code\" documentation methods.</p>"},{"location":"#welcome-to-qbank-connect-api","title":"Welcome to QBank Connect API","text":"<p>This product provides third-party Treasury Management platforms with secure real-time access to QBank's suite of financial services.</p> <p>QUICKSTART: Use the Getting Started guide to onboard, authenticate, and make your first call, all in less than 5 minutes.</p>"},{"location":"#api-functionality","title":"API Functionality","text":"<p>QBank Connect API serves four essential functions of Treasury Management:</p> <ul> <li> <p>Real-Time Cash Positioning: Real-time access to cash balances.</p> </li> <li> <p>Secure Payment Initiation: Secure submission of ACH, Wire payments.</p> </li> <li> <p>Fraud Prevention: Two-way Positive Pay integration for managing check issues and exceptions.</p> </li> <li> <p>Compliance: Detailed logs of all activity and security headers for SOX and PCI DSS compliance.</p> </li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<p>This documentation set is organized around three distinct developer needs: Learning, Understanding, and Information.</p>"},{"location":"#tutorials","title":"Tutorials","text":"<p>Use tutorials to learn new skills:</p> <ul> <li>Getting Started: A quickstart tutorial for developers.</li> </ul>"},{"location":"#explanations","title":"Explanations","text":"<p>Read explanations to understand structures, connections, and processes:</p> <ul> <li> <p>Architecture: An explanation of the API's unique blend of real-time and batch processing.</p> </li> <li> <p>Payment Resilience: A discussion of the API's support for transactional idempotency.</p> </li> </ul>"},{"location":"#references","title":"References","text":"<p>Consult the reference materials for information lookup when you need it:</p> <ul> <li> <p>API Reference Endpoint definitions, generated by parsing the OpenAPI Specification.</p> </li> <li> <p>Python SDK Python libraries to assist development.</p> </li> <li> <p>TypeScript SDK: TypeScript libraries to assist development.</p> </li> <li> <p>Compliance and Security: Regulatory and technical constraints.</p> </li> <li> <p>Glossary: Definitions for terms and acronyms used in this document.</p> </li> </ul>"},{"location":"explanations/02_architecture/","title":"Architecture","text":"<p>Qbank Connect integrates API technologies with legacy batch systems, resulting in a \"hybrid\" architecture.</p>"},{"location":"explanations/02_architecture/#1-the-metl-engine","title":"1. The mETL Engine","text":"<p>In QBank systems, all large data exchanges are handled by the mETL Engine, a legacy batch ETL system. It performs nightly scheduled data syncs between the bank's internal databases and the Fiserv CoreAdvance core banking system. Due to this technical constraint, certain API endpoint DBs get refreshed only once a day.</p>"},{"location":"explanations/02_architecture/#2-a-hybrid-data-flow-api-to-core","title":"2. A Hybrid Data Flow (API to Core)","text":"<p>This diagram illustrates the hybrid data flow between third-party Transaction Management Platforms (\u201cPlatforms\u201d), QBank Connect, the mETL Engine, and Fiserv.</p> <pre><code>graph TD\nA[Platform]--&gt;|\"Real-Time:&lt;br&gt;GET /balances,&lt;br&gt;POST /transfers\"|B[\"API Gateway\"]\nA--&gt;|\"Asynchronous:&lt;br&gt;POST /payments/ach\"|B\nB--&gt;C[\"QBank Connect Service\"&lt;br&gt;\"and Payment Orchestration\"&lt;br&gt;\"System (POS)\"]\nC--&gt;|\"Immediate&lt;br&gt;Write\"|D[\"QBank Connect DB\"]\nD--&gt;|\"Polls every 15 min\"| E[\"mETL Engine\"]\nE--&gt;|\"Extract &amp; Transform - Fiserv Format\"|F[\"Data Processing\"]\nF--&gt;|\"Fiserv Batch&lt;br&gt;Processing\"|G[\"Fiserv CoreAdvance\"]\nG--&gt;|\"Nightly EOD&lt;br&gt;(End of Day) File\"|F\nF--&gt;|\"mETL EOD Job&lt;br&gt;(1:00 am PST)\"|E\nE--&gt;|\"Load (Daily Sync)\"|D\nD--&gt;|\"GET /transactions,&lt;br&gt;/accounts\"|C</code></pre>"},{"location":"explanations/02_architecture/#3-data-latency-described","title":"3. Data Latency Described","text":"<p>The hybrid approach used by this application results in all API requests being categorized into one of two main types of latency:</p> <p>| Category | Example Endpoints | Source | Description |</p> <p>| --- | --- | --- | --- |</p> <p>| Real-Time Synchronous | /balances , /transfers , /payments/wire | A direct call to the Fiserv API | Less than 1 second. <sup>1</sup><sup>2</sup> |</p> <p>| Batch-Latent Asynchronous | /accounts , /transactions , /reports/nsf , /reports/chargebacks | metL import from Fiserv loader | Data is current as of the previous business day. <sup>3</sup> |</p>"},{"location":"explanations/02_architecture/#4-the-three-required-transaction-dates","title":"4. The Three Required Transaction Dates","text":"<p>For both reconciliation and treasury reporting purposes, there are three different date fields contained in the <code>Transaction</code> resource. To meet cash position requirements and other regulatory needs, all platform developers should be aware of the background for each date field. <sup>4</sup></p> <p>| Field Name | Purpose | Source |</p> <p>| --- | --- | --- |</p> <p>| <code>transaction_date</code> | Initiated: The date and time when the customer/ERP initiated the transaction. | The client's core system/request |</p> <p>| <code>value_date</code> | Interest/Funds: The date upon which funds are actually credited/debited to compute interest accrual. <sup>4</sup> | Fiserv CoreAdvance |</p> <p>| <code>posting_date</code> | Available/Posted: The date and time the transaction record was inserted into the QBank Connect DB through the mETL engine and made available through the API. <sup>5</sup><sup>6</sup> | Fiserv CoreAdvance |</p>"},{"location":"explanations/02_architecture/#references","title":"References","text":"<ol> <li> <p>QBank Performance Testing Report, \"Real-Time Endpoint Benchmarks.\"\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance API Integration Guide, \"Direct Connect Latency.\"\u00a0\u21a9</p> </li> <li> <p>QBank mETL Operational Handbook, \"Daily Sync and EOD Cutoff.\"\u00a0\u21a9</p> </li> <li> <p>QBank Whitepaper, \"Transaction Date Standards and Compliance,\" v1.1.\u00a0\u21a9\u21a9</p> </li> <li> <p>QBank Connect Integration Guide, \"Transaction Query Best Practices.\"\u00a0\u21a9</p> </li> <li> <p>QBank Accounting Compliance Memo, \"Posting Date Audit Requirement.\"\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance SFTP Specification, \"Batch Communication Protocol.\"\u00a0\u21a9</p> </li> <li> <p>QBank mETL Engine Design Document, \"Asynchronous Data Integration.\"\u00a0\u21a9</p> </li> <li> <p>QBank Connect SLA, \"API Latency and Data Freshness Profiles.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"explanations/03_payment_resilience/","title":"Payment Resilience","text":"<p>If a connection error causes a payment request to fail, your Platform can safely repeat the request. QBank Connect API supports idempotency to prevent the risk of duplicate payments.<sup>1</sup></p>"},{"location":"explanations/03_payment_resilience/#1-transactional-idempotence-protocol","title":"1. Transactional Idempotence Protocol.","text":"<p>All transaction requests require the <code>Idempotency-Key</code> header containing a 36-character key value (Value Type: UUID V4). In the event that the request needs to be retried, this key provides a database constraint that prevents duplicate records.<sup>2</sup><sup>3</sup> </p> <p>Sample Header: <pre><code>    -H \"Idempotency-Key: f47ac10b-58cc-4372-a567-0e02b2c3d479\" \\\n</code></pre></p>"},{"location":"explanations/03_payment_resilience/#12-conflict-resolution-http-409","title":"1.2. Conflict Resolution (HTTP 409).","text":"<p>When a request is received successfully, the confirmation response can still fail. Your Platform mistakes the non-response as a sign of request failure, so it tries the request again. When QBank Connect finds that the first request is still processing, the second request is rejected with a 409 Conflict error.</p> <p>The response body conforms to the standard <code>application/problem+json</code> structure:</p> <pre><code>HTTP/1.1 409 Conflict\nLink: https://docs.qbankconnect.com/03_payment_workflow.md#transactional-idempotency-protocol; rel=\"describedby\"\nContent-Type: application/problem+json\n\n{\n\"type\": \"https://api.qbankconnect.com/errors/idempotency_conflict\",\n\"title\": \"A request is outstanding for this Idempotency-Key\",\n\"status\": 409,\n\"detail\": \"The payment submission with this key is already in the P_VALIDATED or P_SUBMITTED_TO_CORE state.\",\n\"instance\": \"a2b3c4d5-6e7f-8g9h-0i1j-2k3l4m5n6o7p\"\n}\n</code></pre>"},{"location":"explanations/03_payment_resilience/#2-payment-orchestration-finite-state-machine","title":"2. Payment Orchestration Finite State Machine.","text":"<p>All payment requests are tracked by the Payment Orchestration Service (POS) using a finite state machine. <sup>4</sup> <sup>5</sup></p> <p>| State | Transition Event | Actor/System | Latency |</p> <p>| --- | --- | --- | --- |</p> <p>| <code>P_CREATED</code> | A <code>POST /payments/ach</code> request is submitted. | ERP Platform / API | Instant |</p> <p>| <code>P_VALIDATED</code> | Validations succeed (schema, funds). | QBank Connect Service | Sub-Second |</p> <p>| <code>P_SUBMITTED_TO_CORE</code> | The mETL Engine job successfully places the batch file into the Fiserv SFTP Location. | mETL Engine | 15 Minutes (Max) |</p> <p>| <code>P_PROCESSING</code> | The Fiserv CoreAdvance confirms receipt and begins processing the transaction. | Fiserv CoreAdvance | EOD (Variable) |</p> <p>| <code>P_COMPLETED</code> | Final Settlement Confirmation Received. | mETL / POS | Next Business Day |</p> <p>| <code>P_FAILED</code> | Either rejected by Core Advance, or validation failed. | Core Advance / POS | Immediate or Batch |</p>"},{"location":"explanations/03_payment_resilience/#3-notifications","title":"3. Notifications.","text":"<p>For payable confirmations, QBank Connect provides guaranteed delivery of status updates via webhooks. <sup>1</sup></p>"},{"location":"explanations/03_payment_resilience/#31-webhook-events","title":"3.1. Webhook Events.","text":"<p>When a significant state transition occurs (i.e. from <code>P_PROCESSING</code> to <code>P_COMPLETED</code>) the Webhook Notification Service (WNS) sends an event payload to your registered callback URL. The headers include:</p> <ul> <li> <p>Webhook-Event-ID:  An identifier for this webhook delivery attempt.</p> </li> <li> <p>Webhook-Signature: The HMAC signature that verifies that a). The payload originated from QBank Connect, b). The payload contents have not been tampered with.</p> </li> </ul>"},{"location":"explanations/03_payment_resilience/#32-signature-verification","title":"3.2. Signature Verification.","text":"<p>In order to prevent impersonation and ensure non-repudiation of events received, your Platform must verify the <code>Webhook-Signature</code> header against the payload using the shared secret provided by QBank Connect. Any events received without a valid signature should be discarded.</p>"},{"location":"explanations/03_payment_resilience/#references","title":"References","text":"<ol> <li> <p>QBank Connect API Reference, \"Payment Status and Webhook Integration.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>Idempotency Key Specification, RFC 8142.\u00a0\u21a9</p> </li> <li> <p>Payments API Integration Guide, \"Handling Duplicate Submissions.\"\u00a0\u21a9</p> </li> <li> <p>Payment Orchestration Service (POS) State Diagram, Internal Document.\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance Batch Processing Guide, \"Payment Lifecycle States.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"references/05_api_reference/","title":"API Reference","text":"<p>The QBank Connect API Reference was created from our OpenAPI Specification (OAS 3.1); it outlines all of the required parameters, security headers, and schema models to call each endpoint in the API.</p>"},{"location":"references/05_api_reference/#1-reference-source","title":"1. Reference Source","text":"<p>Our full machine readable OpenAPI Specification is located here: openapi.yaml</p>"},{"location":"references/05_api_reference/#2-endpoint-overview","title":"2. Endpoint Overview","text":"<p>Each endpoint is categorized by the type of financial resource accessed.</p> <p>| Resource | Primary Endpoints | Latency | Use Cases |</p> <p>| :--- | :--- | :--- | :--- |</p> <p>| Account | <code>GET /accounts</code> | Batch-Latent (Daily) | Retrieve general account information. |</p> <p>| Transaction | <code>GET /transactions</code> | Batch-Latent (Daily) | Financial reconciliations can be accomplished using the three date fields (transaction_date, value_date, posting_date). |</p> <p>| Balance | <code>GET /balances/{id}</code> | Real-Time | Cash position at any point during the day and check available funds. <sup>1</sup><sup>2</sup> |</p> <p>| ACH | <code>POST /payments/ach</code> | Asynchronous (15 minute batch) | High volume file transfers.<sup>3</sup> Requires Idempotency-Key. |</p> <p>| PositivePay | <code>POST /positivepay/issues</code>, <code>GET /positivepay/exceptions</code> | Asynchronous/Batch | Check fraud prevention management.<sup>4</sup><sup>5</sup> |</p> <p>| Wire/Transfer | <code>POST /payments/wire</code>, <code>POST /transfers</code> | Real-Time | Fund transfer immediately. Requires Idempotency-Key. |</p>"},{"location":"references/05_api_reference/#3-standardized-error-response","title":"3. Standardized Error Response","text":"<p>For all non-conflict status codes (4xx and 5xx), any response that does not return a <code>409 Conflict</code> will return a standard JSON error response:</p> <p>| Field | Type | Description |</p> <p>| :--- | :--- | :--- |</p> <p>| <code>message</code> | String | User friendly description of the problem encountered. |</p> <p>| <code>error_code</code> | String | QBank specific code for automatic programmatic handling.<sup>6</sup> |</p> <p>| <code>request_id</code> | UUID | A unique identifier used by QBank Support (for internal logging).<sup>7</sup> |</p>"},{"location":"references/05_api_reference/#references","title":"References","text":"<ol> <li> <p>QBank Connect SLA, \"API Latency and Data Freshness Profiles.\"\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance API Integration Guide, \"Direct Connect Latency.\"\u00a0\u21a9</p> </li> <li> <p>ACH Operating Rules and Guidelines (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>QBank Accounting Compliance Memo, \"Posting Date Audit Requirement.\"\u00a0\u21a9</p> </li> <li> <p>Positive Pay System Requirements, ABA Standards (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>QBank Developer Documentation, \"Error Code Directory.\"\u00a0\u21a9</p> </li> <li> <p>SOX Audit Control Requirements, Section 404 (Conceptual Reference).\u00a0\u21a9</p> </li> </ol>"},{"location":"references/06_sdk_python/","title":"Python SDK Integration Guide","text":"<p>The QBank Python SDK is designed to be both type-safe and idiomatic in nature and abstracts away the OAuth 2.0 complexities and manages the transactional integrity automatically.<sup>1</sup> <sup>2</sup></p>"},{"location":"references/06_sdk_python/#1-installation-initialization","title":"1. Installation &amp; Initialization","text":"<p>SDK is available for installation via pip:</p> <pre><code>pip install qbank-connect\n</code></pre> <p>You can initialize the client with your <code>client_id</code> and <code>client_secret</code> using the following method. The SDK will automatically begin the OAuth 2.0 Client Credential flow and manage token caching and refreshing for you.<sup>3</sup></p> <pre><code>from qbank_connect import QBankConnectClient\nfrom qbank_connect.models import AchPaymentRequest\nfrom qbank_connect.errors import QBankIdempotencyConflict, QBankPermissionDeniedError\n\n# Client initializes and immediately fetches a Bearer Token\nclient = QBankConnectClient(\n    client_id=\"YOUR_CLIENT_ID\",\n    client_secret=\"YOUR_CLIENT_SECRET\",\n    scopes=[\"payments.ach.write\", \"balances.read\"]\n)\n</code></pre>"},{"location":"references/06_sdk_python/#2-idempotence-layer-important","title":"2. Idempotence Layer (Important)","text":"<p>All transactional methods (e.g., <code>client.payments.create_ach()</code>) generate a new UUID for the <code>Idempotency-Key</code> header for each call by default unless you explicitly pass one for a retry use case.<sup>4</sup></p>"},{"location":"references/06_sdk_python/#21-safe-ach-submission-automated-idempotence","title":"2.1. Safe ACH Submission (Automated Idempotence)","text":"<pre><code># The SDK will create an automatic Idempotency-Key for this call.\nach_request = AchPaymentRequest(\n    source_account_id=\"...\",\n    recipient_details={...},\n    amount=1000.50,\n    effective_date=\"2025-10-31\"\n)\n\ntry:\n    response = client.payments.create_ach(request=ach_request)\n    print(f\"Payment request accepted. Status: {response.status}\")\nexcept QBankIdempotencyConflict as e:\n# If a 409 Conflict is returned, this exception will be raised.\n# Instead of attempting to retry immediately we check the status instead.\n    print(f\"Conflict detected. Checking transaction status: {e.detail}\")\n    # Logic to call client.payments.get_payment_status(e.transaction_id)\nexcept QBankPermissionDeniedError:\n    print(\"Authentication error: Check scopes and token.\")\n</code></pre>"},{"location":"references/06_sdk_python/#3-type-safe-data-structures-and-named-exceptions","title":"3. Type-Safe Data Structures and Named Exceptions","text":"<p>The Python SDK uses Pydantic Models to define data objects.<sup>1</sup> This means that you receive the advantage of type checking in your IDE, which reduces the number of times you get a <code>400 Bad Request</code> due to incorrect data format.<sup>1</sup></p> <p>In addition, the SDK converts all generic HTTP status codes (e.g., 403, 409, 500) into specific, named exceptions (e.g., <code>QBankIdempotencyConflict</code> for a 409).<sup>1</sup> Developers are able to use idiomatic Python <code>try/except</code> blocks to address failures without having to parse strings to determine the cause of failure.<sup>2</sup> See the Canonical Error Map in the API Reference for a complete list of translations between HTTP status codes and SDK exceptions.</p>"},{"location":"references/06_sdk_python/#references","title":"References","text":"<ol> <li> <p>QBank Developer Documentation, \"Error Code Directory.\"\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>QBank Python SDK Readme, \"Core Features and Design Principles.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>PCI DSS Requirement 10: Track and Monitor All Access to Network Resources and Cardholder Data.\u00a0\u21a9</p> </li> <li> <p>Python SDK Source Code, <code>qbank_connect/payments.py</code> (Idempotency Logic).\u00a0\u21a9</p> </li> </ol>"},{"location":"references/07_sdk_typescript/","title":"TypeScript SDK Integration Guide","text":"<p>QBank's TypeScript SDK is used to integrate QBank with a modern Node.js application or with a web browser in a type-safe manner that abstracts away the underlying complexity of the API and creates an environment where errors can be identified during development instead of runtime. <sup>1</sup>, <sup>2</sup></p>"},{"location":"references/07_sdk_typescript/#1-installation-and-configuration","title":"1. Installation and Configuration","text":"<p>You may use npm or yarn to install the SDK:</p> <pre><code>npm install @qbank/connect\n\n# or\n\nyarn add @qbank/connect\n</code></pre> <p>You will need to initialize the client using your <code>clientId</code> and <code>clientSecret</code>. The SDK handles the complete OAuth 2.0 Client Credential token lifecycle, including caching and renewing the Bearer token before it has expired. <sup>3</sup></p> <pre><code>import { QBankConnectClient, IdempotencyKeyConflictError, PermissionDeniedError } from '@qbank/connect';\nimport { AchPaymentRequest } from './models'; // Auto-generated model interfaces\n\n// Client initializes and manages the token automatically\nconst client = new QBankConnectClient({\n  clientId: 'YOUR_CLIENT_ID',\n  clientSecret: 'YOUR_CLIENT_SECRET',\n  scopes: ['payments.ach.write', 'balances.read'],\n});\n</code></pre>"},{"location":"references/07_sdk_typescript/#2-idiomatic-idempotence-management","title":"2. Idiomatic Idempotence Management","text":"<p>For all transactional endpoints (<code>POST</code>, <code>PUT</code>) the SDK provides transactional integrity management of the <code>Idempotency-Key</code> header.</p> <ul> <li> <p>First Try: Generates a new UUID as the value of the <code>Idempotency-Key</code> header when the key is not supplied manually.</p> </li> <li> <p>Retrying: If a connection issue occurs, you must retry the payment with the same <code>Idempotency-Key</code> so that the payment is processed only once. <sup>4</sup>, <sup>5</sup></p> </li> </ul>"},{"location":"references/07_sdk_typescript/#21-securely-submitting-payments-manual-retry-example","title":"2.1. Securely Submitting Payments (Manual Retry Example)","text":"<pre><code>const requestKey = crypto.randomUUID();\nconst achRequest: AchPaymentRequest = {\n  sourceAccountId: '...',\n  recipientDetails: { /*... */ },\n  amount: 500.25,\n  effectiveDate: '2025-11-05',\n};\n\nasync function createPaymentWithRetry(key: string, request: AchPaymentRequest) {\n  try {\n    const response = await client.payments.createAch(request, {\n      idempotencyKey: key, // Provide key for idempotency guarantee\n    });\n    console.log('Payment accepted. Status:', response.status);\n    return response;\n  } catch (error) {\n    if (error instanceof IdempotencyKeyConflictError) {\n      // The API returned a 409 Conflict. **DO NOT** retry the submission.\n      console.warn(`Idempotency conflict detected. Reason: ${error.detail}`);\n      // Recommended: Check status using GET /payments/{id}\n    } else if (error instanceof PermissionDeniedError) {\n      // The API returned a 403 Forbidden.\n      throw new Error('Unauthorized API call. Check scopes.');\n    } else {\n      // Catch other errors (e.g., QBankServiceUnavailableError for 5xx)\n      throw error;\n    }\n  }\n}\ncreatePaymentWithRetry(requestKey, achRequest);\n</code></pre>"},{"location":"references/07_sdk_typescript/#3-type-safety-and-structured-errors-developer-experience","title":"3. Type Safety and Structured Errors (Developer Experience)","text":"<p>Using strong type checking (e.g. Zod Schemas), the SDK makes the inputs and outputs of APIs explicit, thus enabling errors to be caught while developing (in the IDE) instead of at runtime. <sup>1</sup></p> <p>In addition to translating all status code based API errors (e.g. 400, 403, 409) to Named Error Classes (<code>IdempotencyKeyConflictError</code>, <code>PermissionDeniedError</code>), this abstraction enables developers to programmatically handle failures using <code>try/catch</code> blocks without having to parse raw HTTP status codes or error messages. <sup>1</sup></p>"},{"location":"references/07_sdk_typescript/#references","title":"References","text":"<ol> <li> <p>QBank TypeScript SDK Readme, \"Core Features and Design Principles (Developer Experience).\"\u00a0\u21a9\u21a9\u21a9</p> </li> <li> <p>TypeScript SDK Source Code, <code>src/client.ts</code> (Client Initialization).\u00a0\u21a9</p> </li> <li> <p>OAuth 2.0 Client Credentials Flow, RFC 6749 (Token Lifecycle).\u00a0\u21a9</p> </li> <li> <p>API Design Guidelines, \"Idempotency and Network Failure Handling.\"\u00a0\u21a9</p> </li> <li> <p>QBank Connect API Reference, \"Idempotency-Key Requirements.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"references/08_compliance_security/","title":"Compliance &amp; Security Manual","text":"<p>Maintaining the highest level of security &amp; auditing for FinTech integrations is required. QBank Connect is compliant with both SOX &amp; PCI DSS standards.</p>"},{"location":"references/08_compliance_security/#1-audit-logging-requirements-sox-pci","title":"1. Audit Logging Requirements (SOX / PCI)","text":"<p>A comprehensive audit log must exist for each financial activity. Each API call, system status change &amp; mETL action is captured in an immutable, structured format (JSON).<sup>1</sup> <sup>2</sup></p>"},{"location":"references/08_compliance_security/#11-mandatory-audit-log-fields","title":"1.1. Mandatory Audit Log Fields","text":"<p>To provide auditable evidence, the logs contain:</p> <p>| Field | Description | Compliance Context |</p> <p>| :--- | :--- | :--- |</p> <p>| <code>timestamp</code> | Time recorded in UTC with millisecond accuracy.<sup>2</sup> <sup>3</sup>. | SOX (Audit Trail) |</p> <p>| <code>actor</code> | The authenticated Client ID or User Identity.<sup>3</sup>. | SOX (User Accountability) |</p> <p>| <code>entity_impacted</code> | The impacted Account ID, Payment ID, etc.<sup>3</sup>. | SOX (Data Accountability) |</p> <p>| <code>request_id</code> | Unique request ID for end-to-end tracing purposes.<sup>4</sup> <sup>3</sup>. | PCI DSS (Troubleshooting / Investigation) |</p> <p>| <code>idempotency_key</code> | Required for all transactional attempts (if applicable).<sup>5</sup>. | SOX (Audit Trail) |</p>"},{"location":"references/08_compliance_security/#12-non-repudiation-header","title":"1.2. Non-Repudiation Header","text":"<p>For all transactional requests (POST, PUT, PATCH), a highly recommended audit compliance header should be used for each request that initiates from a user interface within the ERP.</p> <p>| Header Name | Value Format | Description |</p> <p>| :--- | :--- | :--- |</p> <p>| <code>x-fapi-auth-date</code> | HTTP-date (e.g., Tue, 11 Sep 2012 19:43:31 GMT) | The date/time the end-user (PSU) last authenticated with the client application.<sup>6</sup>. |</p>"},{"location":"references/08_compliance_security/#2-secure-transport-and-applications","title":"2. Secure Transport and Applications","text":"<p>The following mandatory security policies apply to how you connect to QBank Connect to secure the data transport pipeline, and provide appropriate access to your environment.</p>"},{"location":"references/08_compliance_security/#21-tls-enforcement","title":"2.1. TLS Enforcement","text":"<p>All connections to QBank Connect MUST use HTTPS (TLS 1.2 or higher) to provide secure communication over the web. If a connection is made using a less secure version of TLS, it will be denied immediately at the API Gateway layer to prevent man-in-the-middle attacks.<sup>7</sup>. X.509 certificates are used to verify the identity of the client, and provide encryption.<sup>7</sup></p>"},{"location":"references/08_compliance_security/#22-role-based-access-control-rbac","title":"2.2. Role-Based Access Control (RBAC)","text":"<p>Access to the services provided by QBank Connect are based on the OAuth 2.0 scopes that have been assigned to your client_id upon registration (i.e. transactions.read vs payments.ach.write). If you attempt to make a request against a resource for which you do not have permission, you will receive a 403 Forbidden response.<sup>8</sup> <sup>9</sup></p>"},{"location":"references/08_compliance_security/#3-api-versioning-strategy","title":"3. API Versioning Strategy","text":"<p>QBank Connect employs a URL-based versioning strategy (i.e. /v1/).</p> <p>Major Version Changes (v1 to v2): These occur when breaking changes are introduced into the API (e.g. changing the structure of the payload, removing important fields, changing the way resources are routed through the API)<sup>10</sup>.</p> <p>Minor Versions: Any changes that are non-breaking (adding new endpoints, adding optional fields, etc.) will be added to the current version of the API and will remain backwards compatible with previous versions.<sup>11</sup> <sup>10</sup></p>"},{"location":"references/08_compliance_security/#references","title":"References","text":"<ol> <li> <p>QBank Internal Systems Manual, \"Immutable Log Architecture.\"\u00a0\u21a9</p> </li> <li> <p>PCI DSS Requirement 10: Track and Monitor All Access to Network Resources and Cardholder Data.\u00a0\u21a9\u21a9</p> </li> <li> <p>SOX Audit Control Requirements, Section 404 (Conceptual Reference).\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>Distributed Tracing Standard, W3C Trace Context (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>Idempotency Key Specification, RFC 8142 (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>Open Banking (UK) Security Profile: FAPI Compliance and Authentication.\u00a0\u21a9</p> </li> <li> <p>NIST SP 800-52 Rev. 2: Guidelines for TLS Server Configuration.\u00a0\u21a9\u21a9</p> </li> <li> <p>QBank API Security Guide, \"OAuth 2.0 Scope and RBAC Policies.\"\u00a0\u21a9</p> </li> <li> <p>OAuth 2.0 Authorization Framework, RFC 6749 (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>QBank API Design Standards, \"Versioning Policy.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>Semantic Versioning 2.0.0 (Conceptual Reference).\u00a0\u21a9</p> </li> </ol>"},{"location":"references/09_glossary/","title":"Glossary of Terms","text":"<p>This section provides definitions of all specialized terms and acronyms that are used throughout this documentation.</p> <p>ACH (Automated Clearing House)</p> <p>: The main electronic funds transfer system for processing transactions in the United States. Used for payroll, direct deposits, bill payments and other types of transactions.</p> <p>Idempotence</p> <p>: When an operation has idempotent properties, it can be run many times with the exact same parameters and produce the same results as if the operation was run one time, without any unintended side effects. This is crucial for maintaining the integrity of transactions in distributed systems.</p> <p>OAuth 2.0 Client Credentials Flow</p> <p>: Authorization flow that is used when a client (such as an ERP system) acts on its own behalf, not on behalf of a user. Uses the client ID and client secret to get an access token.</p> <p>PCI DSS (Payment Card Industry Data Security Standard)</p> <p>: Set of rules developed by Payment Card Industry to ensure that all organizations that collect, process, store, and/or transmit credit card information maintain a secure environment.</p> <p>SOX (Sarbanes-Oxley Act)</p> <p>: Law passed by the US Congress which requires strict standards for all US public company boards, management and public accounting firms. Specifically, SOX dictates the need for internal controls, including detailed audit logs and non-repudiation for all financial transactions.</p> <p>TLS (Transport Layer Security)</p> <p>: Cryptographic protocols designed to provide confidentiality and integrity for communication between two computers in a network. Must be implemented to enforce HTTPS and to protect data being transmitted from unauthorized parties.</p>"},{"location":"tutorials/01_getting_started/","title":"Getting Started","text":"<p>We can begin by using the OAuth 2.0 Client Credentials Grant to do B2B server-to-server authentication on behalf of our customers. This is perfect for our ERP clients because we need to allow them to have automatic, unattended access to their resources.</p>"},{"location":"tutorials/01_getting_started/#1-onboarding-process","title":"1. Onboarding Process","text":"<p>1.1. Registering: In order to get started, contact your QBank Account Manager to register your Platform. Your Account Manager will give you a unique <code>client_id</code> and a safe <code>client_secret</code>.</p> <p>1.2. Scope Approval: When registering, you will need to enter the specific permissions (scopes) that your application needs (i.e., <code>transactions.read</code>, <code>payments.ach.write</code>) as well as who has approval to make those requests.</p> <p>1.3. Storing Credentials: Securely store your <code>client_id</code> and <code>client_secret</code> in an environment vault (AWS Secrets Manager, Azure Key Vault).</p>"},{"location":"tutorials/01_getting_started/#2-using-oauth-20-client-credential-flow","title":"2. Using OAuth 2.0 Client Credential Flow","text":"<p>You are going to use your <code>client_id</code> and <code>client_secret</code> to get a short-term Bearer Token from us.</p>"},{"location":"tutorials/01_getting_started/#21-get-an-access-token","title":"2.1. Get an Access Token","text":"<p>You send a <code>POST</code> to the token endpoint:</p> Field Value Endpoint <code>POST https://auth.qbankconnect.com/token</code> Content-Type <code>application/x-www-form-urlencoded</code> <p>Request Body (Form URL Encoded)</p> Parameter Description grant_type It needs to be <code>client_credentials</code>. client_id The unique ID provided when registering. client_secret The secret key provided when registering. scope The scope parameter needs to contain a space separated list of requested permissions (e.g., <code>accounts.read payments.ach.write</code>)."},{"location":"tutorials/01_getting_started/#22-processing-the-response","title":"2.2. Processing the Response","text":"<p>When sending a successful response, it includes the access token and the length of time (usually 3600 seconds/1 hour) the token remains valid.</p> <pre><code>{\n\"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n\"token_type\": \"Bearer\",\n\"expires_in\": 3600,\n\"scope\": \"accounts.read payments.ach.write\"\n}\n</code></pre>"},{"location":"tutorials/01_getting_started/#23-api-call-with-the-token","title":"2.3. API Call with the Token","text":"<p>You will need to include the <code>access_token</code> in the <code>Authorization</code> header of each API call after obtaining the access token.</p> Header Value <code>Authorization</code> <code>Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code> <p>All of these steps are included in the QBank SDKs (including renewal and token expiration), so you don't need to handle the token lifecycle yourself (see Python SDK).</p>"},{"location":"tutorials/01_getting_started/#3-quick-start-retrieving-a-current-balance","title":"3. Quick Start: Retrieving a Current Balance","text":"<p>You can retrieve the most recent balance of an account by calling the <code>/balances</code> endpoint; however, the call to the <code>/balances</code> endpoint is a real-time synchronous call to the core system.</p> Field Value Endpoint <code>GET /v1/balances/{accountId}</code> Scopes Required <code>balances.read</code> <pre><code>curl --location '[https://api.qbankconnect.com/v1/balances/a1b2c3d4-e5f6-7890-1234-567890abcde](https://api.qbankconnect.com/v1/balances/a1b2c3d4-e5f6-7890-1234-567890abcde)' \\\n--header 'Authorization: Bearer &lt;YOUR_ACCESS_TOKEN&gt;'\n</code></pre> <p>When making this request, you will receive a <code>200 OK</code> response and the available balance and ledger balance for the account.</p>"}]}
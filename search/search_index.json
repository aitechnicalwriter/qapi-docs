{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>*NOTE: This document showcases John Stonecypher's skills in API Documentation and Docs-as-Code documentation methods. The products, business entities, and data used in this document are completely fictional. The products, and their associated code, were designed with assistance from Google Gemini.</p>"},{"location":"#welcome-to-qbank-connect-api","title":"Welcome to QBank Connect API","text":"<p>This product provides third-party Treasury Management platforms with secure real-time access to QBank's suite of financial services.</p>"},{"location":"#developer-quickstart-5-minutes","title":"Developer QuickStart (&lt;5 Minutes)","text":"<p>Take our API for a test drive! </p> <p>Use the Getting Started guide to onboard, authenticate, and make your first call, all in less than 5 minutes.</p>"},{"location":"#1-functionality","title":"1. Functionality","text":"<p>When you integrate your TM Platform (\"Platform\") with QBank Connect, the Platform gains the following functionality:</p> <ul> <li> <p>Real-Time Cash Positioning: Real-time access to cash balances.</p> </li> <li> <p>Secure Payment Initiation: Secure submission of ACH, Wire payments.</p> </li> <li> <p>Fraud Prevention: Two-way Positive Pay integration for managing check issues and exceptions.</p> </li> <li> <p>Compliance: Detailed logs of all activity and security headers for SOX and PCI DSS compliance.</p> </li> </ul>"},{"location":"#2-documentation-structure","title":"2. Documentation Structure","text":"<p>This documentation set is organized around three distinct developer needs: Learning, Understanding, and Information.</p>"},{"location":"#21-tutorials","title":"2.1. Tutorials","text":"<p>Use tutorials to learn new skills:</p> <ul> <li>Getting Started: A quickstart tutorial for developers.</li> </ul>"},{"location":"#22-explanations","title":"2.2. Explanations","text":"<p>Read explanations to understand structures, connections, and processes:</p> <ul> <li> <p>Architecture: An explanation of the API's unique blend of real-time and batch processing.</p> </li> <li> <p>Payment Resilience: A discussion of the API's support for transactional idempotency.</p> </li> </ul>"},{"location":"#23-references","title":"2.3. References","text":"<p>Consult the reference materials for information lookup when you need it:</p> <ul> <li> <p>API Overview: Overview of the core components.</p> </li> <li> <p>API Console: Comprehensive, machine-readable OpenAPI Specification.</p> </li> <li> <p>Python SDK: Python libraries to assist development.</p> </li> <li> <p>TypeScript SDK: TypeScript libraries to assist development.</p> </li> <li> <p>Compliance and Security: Regulatory and technical constraints.</p> </li> <li> <p>Glossary: Definitions for terms and acronyms used in this document.</p> </li> </ul>"},{"location":"explanations/02_architecture/","title":"Architecture","text":"<p>Qbank Connect integrates API technologies with legacy batch systems, resulting in a \"hybrid\" architecture.</p>"},{"location":"explanations/02_architecture/#1-the-metl-engine","title":"1. The mETL Engine","text":"<p>In QBank systems, all large data exchanges are handled by the mETL Engine, a legacy batch ETL system. It performs nightly scheduled data syncs between the bank's internal databases and the Fiserv CoreAdvance core banking system. <sup>1</sup> <sup>2</sup> <sup>3</sup> Due to this technical constraint, certain API endpoint DBs get refreshed only once a day.</p>"},{"location":"explanations/02_architecture/#2-hybrid-data-flow-api-to-core","title":"2. Hybrid Data Flow (API to Core)","text":"<p>This diagram illustrates the hybrid data flow between third-party Transaction Management Platforms (\u201cPlatforms\u201d), QBank Connect, the mETL Engine, and Fiserv.</p> <pre><code>graph TD\nA[Platform]--&gt;|\"Real-Time: GET /balances, POST /transfers\"|B[\"QBank Connect API Gateway\"]\nA--&gt;|\"Asynchronous: POST /payments/ach\"|B\nB--&gt;C{\"QBank&lt;br&gt;Connect Service&lt;br&gt;&amp; POS\"}\nC--&gt;|\"Immediate Write\"|D[\"QBank Connect DB\"]\nD--&gt;|\"Polls every 15 min\"| E[\"mETL Engine\"]\nE--&gt;|\"Extract &amp; Transform - Fiserv Format\"|F[\"Data Processing\"]\nF--&gt;|\"Fiserv Batch Processing - CoreAdvance\"|G[\"Fiserv CoreAdvance Core\"]\nG--&gt;|\"Nightly EOD File - End of Day\"|F\nF--&gt;|\"mETL EOD Job - 1:00 am\"|E\nE--&gt;|\"Load - Daily Sync\"|D\nD--&gt;|\"GET /transactions, /accounts\"|C</code></pre>"},{"location":"explanations/02_architecture/#3-data-latency","title":"3. Data Latency","text":"<p>The hybrid approach used by this application results in all API requests being categorized into one of two main types of latency:</p> Category Example Endpoints Source Description Real-Time Synchronous /balances , /transfers , /payments/wire A direct call to the Fiserv API Less than 1 second. <sup>5</sup><sup>6</sup> Batch-Latent Asynchronous /accounts , /transactions , /reports/nsf , /reports/chargebacks metL import from Fiserv loader Data is current as of the previous business day. <sup>7</sup>"},{"location":"explanations/02_architecture/#4-the-three-required-transaction-dates","title":"4. The Three Required Transaction Dates","text":"<p>For both reconciliation and treasury reporting purposes, there are three different date fields contained in the <code>Transaction</code> resource. To meet cash position requirements and other regulatory needs, all platform developers should be aware of the background for each date field. <sup>4</sup></p> Field Name Purpose Source <code>transaction_date</code> Initiated: The date and time when the customer/ERP initiated the transaction. The client's core system/request <code>value_date</code> Interest/Funds: The date upon which funds are actually credited/debited to compute interest accrual. <sup>4</sup> Fiserv CoreAdvance <code>posting_date</code> Available/Posted: The date and time the transaction record was inserted into the QBank Connect DB through the mETL engine and made available through the API. <sup>8</sup><sup>9</sup> Fiserv CoreAdvance"},{"location":"explanations/02_architecture/#5-documents-cited","title":"5. Documents Cited","text":"<ol> <li> <p>Fiserv CoreAdvance SFTP Specification, \"Batch Communication Protocol.\"\u00a0\u21a9</p> </li> <li> <p>QBank mETL Engine Design Document, \"Asynchronous Data Integration.\"\u00a0\u21a9</p> </li> <li> <p>QBank Connect SLA, \"API Latency and Data Freshness Profiles.\"\u00a0\u21a9</p> </li> <li> <p>QBank Whitepaper, \"Transaction Date Standards and Compliance,\" v1.1.\u00a0\u21a9\u21a9</p> </li> <li> <p>QBank Performance Testing Report, \"Real-Time Endpoint Benchmarks.\"\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance API Integration Guide, \"Direct Connect Latency.\"\u00a0\u21a9</p> </li> <li> <p>QBank mETL Operational Handbook, \"Daily Sync and EOD Cutoff.\"\u00a0\u21a9</p> </li> <li> <p>QBank Connect Integration Guide, \"Transaction Query Best Practices.\"\u00a0\u21a9</p> </li> <li> <p>QBank Accounting Compliance Memo, \"Posting Date Audit Requirement.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"explanations/03_payment_resilience/","title":"Payment Resilience","text":"<p>If a connection error causes a payment request to fail, your Platform can safely repeat the request. QBank Connect API supports idempotency to prevent the risk of duplicate payments.<sup>1</sup></p>"},{"location":"explanations/03_payment_resilience/#1-transactional-idempotence-protocol","title":"1. Transactional Idempotence Protocol","text":"<p>All transaction requests require the <code>Idempotency-Key</code> header containing a 36-character key value (Value Type: UUID V4). In the event that the request needs to be retried, this key provides a database constraint that prevents duplicate records.<sup>2</sup><sup>3</sup> </p> <p>Sample Header: <pre><code>    -H \"Idempotency-Key: f47ac10b-58cc-4372-a567-0e02b2c3d479\" \\\n</code></pre></p>"},{"location":"explanations/03_payment_resilience/#12-conflict-resolution-http-409","title":"1.2. Conflict Resolution (HTTP 409)","text":"<p>When a request is received successfully, the confirmation response can still fail. Your Platform mistakes the non-response as a sign of request failure, so it tries the request again. When QBank Connect finds that the first request is still processing, the second request is rejected with a 409 Conflict error.</p> <p>The response body conforms to the standard <code>application/problem+json</code> structure:</p> <pre><code>HTTP/1.1 409 Conflict\nLink: https://docs.qbankconnect.com/03_payment_workflow.md#transactional-idempotency-protocol; rel=\"describedby\"\nContent-Type: application/problem+json\n\n{\n\"type\": \"https://api.qbankconnect.com/errors/idempotency_conflict\",\n\"title\": \"A request is outstanding for this Idempotency-Key\",\n\"status\": 409,\n\"detail\": \"The payment submission with this key is already in the P_VALIDATED or P_SUBMITTED_TO_CORE state.\",\n\"instance\": \"a2b3c4d5-6e7f-8g9h-0i1j-2k3l4m5n6o7p\"\n}\n</code></pre>"},{"location":"explanations/03_payment_resilience/#2-payment-orchestration-finite-state-machine","title":"2. Payment Orchestration Finite State Machine","text":"<p>All payment requests are tracked by the Payment Orchestration Service (POS) using a finite state machine. <sup>4</sup> <sup>5</sup></p> State Transition Event Actor/System Latency <code>P_CREATED</code> A <code>POST /payments/ach</code> request is submitted. ERP Platform / API Instant <code>P_VALIDATED</code> Validations succeed (schema, funds). QBank Connect Service Sub-Second <code>P_SUBMITTED_TO_CORE</code> The mETL Engine job successfully places the batch file into the Fiserv SFTP Location. mETL Engine 15 Minutes (Max) <code>P_PROCESSING</code> The Fiserv CoreAdvance confirms receipt and begins processing the transaction. Fiserv CoreAdvance EOD (Variable) <code>P_COMPLETED</code> Final Settlement Confirmation Received. mETL / POS Next Business Day <code>P_FAILED</code> Either rejected by Core Advance, or validation failed. Core Advance / POS Immediate or Batch"},{"location":"explanations/03_payment_resilience/#3-payable-status-notifications","title":"3. Payable Status Notifications","text":"<p>For payable transactions, QBank Connect uses webhooks to send status updates to your Platform. <sup>1</sup></p>"},{"location":"explanations/03_payment_resilience/#31-webhook-events","title":"3.1. Webhook Events","text":"<p>When a significant state transition occurs (i.e. from <code>P_PROCESSING</code> to <code>P_COMPLETED</code>) the Webhook Notification Service (WNS) sends an event payload to your registered callback URL. The headers include:</p> <ul> <li> <p>Webhook-Event-ID:  An identifier for this webhook delivery attempt.</p> </li> <li> <p>Webhook-Signature: The HMAC signature that verifies that a). The payload originated from QBank Connect, b). The payload contents have not been tampered with.</p> </li> </ul>"},{"location":"explanations/03_payment_resilience/#32-signature-verification","title":"3.2. Signature Verification","text":"<p>In order to prevent impersonation and ensure non-repudiation of events received, your Platform must verify the <code>Webhook-Signature</code> header against the payload using the shared secret provided by QBank Connect. Any events received without a valid signature should be discarded.</p>"},{"location":"explanations/03_payment_resilience/#4-documents-cited","title":"4. Documents Cited","text":"<ol> <li> <p>QBank Connect API Reference, \"Payment Status and Webhook Integration.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>Idempotency Key Specification, RFC 8142.\u00a0\u21a9</p> </li> <li> <p>Payments API Integration Guide, \"Handling Duplicate Submissions.\"\u00a0\u21a9</p> </li> <li> <p>Payment Orchestration Service (POS) State Diagram, Internal Document.\u00a0\u21a9</p> </li> <li> <p>Fiserv CoreAdvance Batch Processing Guide, \"Payment Lifecycle States.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"references/05_api_overview/","title":"API Introduction","text":"<p>In this section we describe the key elements of the QBank Connect API.</p> <p>For the full machine-readable OpenAPI Specification, visit the API Console</p>"},{"location":"references/05_api_overview/#1-service-information-login","title":"1. Service Information &amp; Login","text":""},{"location":"references/05_api_overview/#11-the-base-url","title":"1.1. The Base URL","text":"<p>You must use the versioned base URL as your prefix for all API calls:</p> <pre><code>https://api.qbankconnect.com/v1\n</code></pre>"},{"location":"references/05_api_overview/#12-security","title":"1.2. Security","text":"<p>QBank Connect uses the OAuth 2.0 Client Credentials Grant mechanism for B2B server-to-server login.</p> <p>The <code>access_token</code> represents the authorization you have to perform operations defined in the scopes listed below. If the <code>access_token</code> does not contain the required scope for an operation you will receive a 403 Forbidden response.</p> Scope Description Resource Access <code>accounts.read</code> Get general information about an account Read-Only <code>balances.read</code> Get the current cash balance on an account Read-Only <code>transactions.read</code> Get historical transaction data for an account Read-Only <code>payments.read</code> Get the current status and history of payments Read-Only <code>payments.ach.write</code> Initiate high volume ACH payments Write <code>payments.wire.write</code> Initiate wire payments immediately Write <code>transfers.write</code> Transfer funds between accounts Write <code>positivepay.issues.write</code> Submit check issues (Positive Pay) Write <code>positivepay.exceptions.read</code> Get outstanding check exceptions (Positive Pay) Read-Only"},{"location":"references/05_api_overview/#2-endpoints","title":"2. Endpoints","text":"<p>The QBank architecture uses both real-time and batch architectures. All developers must be aware of the delay associated with each resource.</p> Resource Primary Endpoints Latency Description Authentication <code>POST /token</code> Real-Time OAuth 2.0 Client Credentials flow. Account <code>GET /accounts</code> Batch-Latent (Daily) General account details. Updated nightly via mETL. Balance <code>GET /balances/{accountId}</code> Real-Time Calls the core system synchronously for the current cash position on an account. Transactions <code>GET /transactions</code> Batch-Latent (Daily) Historical transactions for an account with three reconciliation date fields. ACH Payments <code>POST /payments/ach</code> Asynchronous (15 min batch) Bulk file uploads for ACH payments. Must include <code>Idempotency-Key</code>. Wire Payments <code>POST /payments/wire</code> Real-Time Immediately sends funds to another bank account. Must include <code>Idempotency-Key</code>. Transfers <code>POST /transfers</code> Real-Time Moves funds internally between accounts. Must include <code>Idempotency-Key</code>. Payment Status <code>GET /payments/{paymentId}</code> Real-Time Enables the client to poll for the final status of a payment. Positive Pay <code>POST /positivepay/issues</code> Asynchronous/Batch Creates a new check issue record. Must include <code>Idempotency-Key</code>. <code>GET /positivepay/exceptions</code> Batch-Latent (Daily) Retrieves non-matching checks pending decisioning."},{"location":"references/05_api_overview/#3-request-and-response-headers","title":"3. Request and Response Headers","text":""},{"location":"references/05_api_overview/#31-authorization-header","title":"3.1. Authorization Header","text":"<p>A valid <code>Authorization</code> header containing the <code>Bearer</code> access token obtained from the <code>/token</code> endpoint is required for every call.</p> Header Value Format <code>Authorization</code> <code>Bearer</code>"},{"location":"references/05_api_overview/#32-idempotency-header-required-for-transaction-endpoints","title":"3.2. Idempotency Header (Required for Transaction Endpoints)","text":"<p>Every <code>POST</code> request for transactional endpoints (e.g., <code>/payments/ach</code>, <code>/transfers</code>) requires an <code>Idempotency-Key</code> header so the system can enforce the atomicity of transactions and eliminate duplicate submissions.</p> Header Value Format Description <code>Idempotency-Key</code> UUID V4 (36-character) A client-provided UUID that uniquely identifies a transaction to avoid duplication."},{"location":"references/05_api_overview/#4-webhooks","title":"4. WebHooks","text":"<p>QBank Connect notifies your platform of the final status of asynchronous payments using WebHooks.</p>"},{"location":"references/05_api_overview/#41-event-paymentstatusupdate","title":"4.1. Event: <code>paymentStatusUpdate</code>","text":"<p>The event is triggered whenever there is a final transition in the payment status (i.e., <code>P_COMPLETED</code> or <code>P_FAILED</code>).</p> Component Detail Incoming Method <code>POST</code> Payload Schema <code>WebhookEvent</code> (including the updated <code>Payment</code> object) Required Client Response <code>HTTP 200 OK</code> (acknowledge receipt)"},{"location":"references/05_api_overview/#42-webhook-security-verification","title":"4.2. WebHook Security Verification","text":"<p>For non-repudiation, all webhook deliveries contain the <code>Webhook-Signature</code> header. Your platform must validate this HMAC signature against the payload using the shared secret provided by QBank Connect. You should discard events that do not have a valid signature.</p> Header Name Purpose <code>Webhook-Event-ID</code> Unique identifier for this delivery attempt. <code>Webhook-Signature</code> HMAC signature for validating the payload's origin and integrity."},{"location":"references/05_api_overview/#5-error-handling","title":"5. Error Handling","text":"<p>All error responses are categorized into one of two types to allow client SDKs to catch errors (e.g., in Python/TypeScript <code>try/catch</code> blocks).</p>"},{"location":"references/05_api_overview/#51-standard-error-response-4xx-5xx","title":"5.1. Standard Error Response (4xx, 5xx)","text":"<p>Use this error response for all general errors (Authentication, Authorization, Validation, etc.) except for idempotence conflicts.</p> <p>Content-Type: <code>application/json</code></p> Status Code Example Use Case <code>401 Unauthorized</code> Access token is invalid/has expired. <code>403 Forbidden</code> Token is valid, however missing required scopes (e.g., <code>payments.write</code>). <code>404 Not Found</code> Resource ID in the path is not present. <code>503 Service Unavailable</code> System is temporarily under maintenance."},{"location":"references/05_api_overview/#standard-error-response-body","title":"Standard Error Response Body","text":"Field Type Description <code>message</code> <code>string</code> A user-friendly explanation of what occurred. <code>error_code</code> <code>string</code> QBank-specific code (e.g., <code>ERR_ACC_001</code>) so SDK developers can programmatically translate the error. <code>request_id</code> <code>UUID</code> Unique identifier for the entire lifecycle traceability and QBank Support lookup."},{"location":"references/05_api_overview/#52-idempotency-conflict-response-http-409","title":"5.2. Idempotency Conflict Response (HTTP 409)","text":"<p>This specialized response is sent when a duplicate transaction request is received while the original request is still being processed.</p> <p>Content-Type: <code>application/problem+json</code> (IETF RFC 7807) | Status Code | Error Type | Recovery Instruction | | :--- | :--- | :--- | | <code>409 Conflict</code> | Idempotency Violation | DO NOT RETRY. Use the <code>transaction_id</code> to poll the <code>GET /payments/{id}</code> endpoint. |</p>"},{"location":"references/05_api_overview/#conflict-response-body-applicationproblemjson","title":"Conflict Response Body (<code>application/problem+json</code>)","text":"Field Type Description <code>type</code> <code>URI</code> Reference URI for the problem type (e.g., <code>.../problems/idempotency-conflict</code>). <code>title</code> <code>string</code> Brief human-readable description of the problem. <code>detail</code> <code>string</code> Detailed context describing why the problem occurred (e.g., \"There is already a request with this key being processed\"). <code>transaction_id</code> <code>UUID</code> The ID of the transaction that is currently processing, allowing safe client recovery."},{"location":"references/05_api_overview/#6-data-models","title":"6. Data Models","text":"<p>All resource models conform to an inheritance hierarchy to ensure regulatory compliance over all financial objects.</p>"},{"location":"references/05_api_overview/#61-audit-fields-compliance-inheritance","title":"6.1. Audit Fields (Compliance Inheritance)","text":"<p>All auditable resources (<code>Account</code>, <code>Transaction</code>, <code>Payment</code>, etc.) will automatically inherit the following required fields for SOX and PCI DSS compliance.</p> Field Type Description Compliance Context <code>timestamp</code> <code>string</code> (<code>date-time</code>) The time recorded in UTC with millisecond precision. SOX (Audit Trail) <code>actor</code> <code>string</code> The authenticated Client ID who initiated the request. SOX (User Accountability) <code>request_id</code> <code>string</code> (<code>uuid</code>) Unique ID of the request for end-to-end traceability. PCI DSS (Troubleshooting)"},{"location":"references/05_api_overview/#62-transaction-resource-model","title":"6.2. Transaction Resource Model","text":"<p>The <code>Transaction</code> model contains three distinct date fields important for financial reconciliation and regulatory obligations.</p> Field Type Use <code>transaction_date</code> <code>string</code> (<code>date-time</code>) Initiated: Date/time the customer/ERP initiated the transaction. <code>value_date</code> <code>string</code> (<code>date</code>) Funds/Interest: Date funds are actually credited/debited to calculate interest. <code>posting_date</code> <code>string</code> (<code>date-time</code>) Available/Posted: Date/time record was added to the QBank Connect database and made available through the API (EOD sync)."},{"location":"references/06_sdk_python/","title":"Python SDK Integration Guide","text":"<p>The QBank Python SDK is designed to be both type-safe and idiomatic in nature and abstracts away the OAuth 2.0 complexities and manages the transactional integrity automatically.<sup>1</sup> <sup>2</sup></p>"},{"location":"references/06_sdk_python/#1-installation-initialization","title":"1. Installation &amp; Initialization","text":"<p>SDK is available for installation via pip:</p> <pre><code>pip install qbank-connect\n</code></pre> <p>You can initialize the client with your <code>client_id</code> and <code>client_secret</code> using the following method. The SDK will automatically begin the OAuth 2.0 Client Credential flow and manage token caching and refreshing for you.<sup>3</sup></p> <pre><code>from qbank_connect import QBankConnectClient\nfrom qbank_connect.models import AchPaymentRequest\nfrom qbank_connect.errors import QBankIdempotencyConflict, QBankPermissionDeniedError\n\n# Client initializes and immediately fetches a Bearer Token\nclient = QBankConnectClient(\n    client_id=\"YOUR_CLIENT_ID\",\n    client_secret=\"YOUR_CLIENT_SECRET\",\n    scopes=[\"payments.ach.write\", \"balances.read\"]\n)\n</code></pre>"},{"location":"references/06_sdk_python/#2-idempotence-layer-important","title":"2. Idempotence Layer (Important)","text":"<p>All transactional methods (e.g., <code>client.payments.create_ach()</code>) generate a new UUID for the <code>Idempotency-Key</code> header for each call by default unless you explicitly pass one for a retry use case.<sup>4</sup></p>"},{"location":"references/06_sdk_python/#21-safe-ach-submission-automated-idempotence","title":"2.1. Safe ACH Submission (Automated Idempotence)","text":"<pre><code># The SDK will create an automatic Idempotency-Key for this call.\nach_request = AchPaymentRequest(\n    source_account_id=\"...\",\n    recipient_details={...},\n    amount=1000.50,\n    effective_date=\"2025-10-31\"\n)\n\ntry:\n    response = client.payments.create_ach(request=ach_request)\n    print(f\"Payment request accepted. Status: {response.status}\")\nexcept QBankIdempotencyConflict as e:\n# If a 409 Conflict is returned, this exception will be raised.\n# Instead of attempting to retry immediately we check the status instead.\n    print(f\"Conflict detected. Checking transaction status: {e.detail}\")\n    # Logic to call client.payments.get_payment_status(e.transaction_id)\nexcept QBankPermissionDeniedError:\n    print(\"Authentication error: Check scopes and token.\")\n</code></pre>"},{"location":"references/06_sdk_python/#3-type-safe-data-structures-and-named-exceptions","title":"3. Type-Safe Data Structures and Named Exceptions","text":"<p>The Python SDK uses Pydantic Models to define data objects.<sup>1</sup> This means that you receive the advantage of type checking in your IDE, which reduces the number of times you get a <code>400 Bad Request</code> due to incorrect data format.<sup>1</sup></p> <p>In addition, the SDK converts all generic HTTP status codes (e.g., 403, 409, 500) into specific, named exceptions (e.g., <code>QBankIdempotencyConflict</code> for a 409).<sup>1</sup> Developers are able to use idiomatic Python <code>try/except</code> blocks to address failures without having to parse strings to determine the cause of failure.<sup>2</sup> See the Canonical Error Map in the API Reference for a complete list of translations between HTTP status codes and SDK exceptions.</p>"},{"location":"references/06_sdk_python/#4-documents-cited","title":"4. Documents Cited","text":"<ol> <li> <p>QBank Developer Documentation, \"Error Code Directory.\"\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>QBank Python SDK Readme, \"Core Features and Design Principles.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>PCI DSS Requirement 10: Track and Monitor All Access to Network Resources and Cardholder Data.\u00a0\u21a9</p> </li> <li> <p>Python SDK Source Code, <code>qbank_connect/payments.py</code> (Idempotency Logic).\u00a0\u21a9</p> </li> </ol>"},{"location":"references/07_sdk_typescript/","title":"TypeScript SDK Integration Guide","text":"<p>QBank's TypeScript SDK is used to integrate QBank with a modern Node.js application or with a web browser in a type-safe manner that abstracts away the underlying complexity of the API and creates an environment where errors can be identified during development instead of runtime. <sup>1</sup>, <sup>2</sup></p>"},{"location":"references/07_sdk_typescript/#1-installation-and-configuration","title":"1. Installation and Configuration","text":"<p>You may use npm or yarn to install the SDK:</p> <pre><code>npm install @qbank/connect\n\n# or\n\nyarn add @qbank/connect\n</code></pre> <p>You will need to initialize the client using your <code>clientId</code> and <code>clientSecret</code>. The SDK handles the complete OAuth 2.0 Client Credential token lifecycle, including caching and renewing the Bearer token before it has expired. <sup>3</sup></p> <pre><code>import { QBankConnectClient, IdempotencyKeyConflictError, PermissionDeniedError } from '@qbank/connect';\nimport { AchPaymentRequest } from './models'; // Auto-generated model interfaces\n\n// Client initializes and manages the token automatically\nconst client = new QBankConnectClient({\n  clientId: 'YOUR_CLIENT_ID',\n  clientSecret: 'YOUR_CLIENT_SECRET',\n  scopes: ['payments.ach.write', 'balances.read'],\n});\n</code></pre>"},{"location":"references/07_sdk_typescript/#2-idiomatic-idempotence-management","title":"2. Idiomatic Idempotence Management","text":"<p>For all transactional endpoints (<code>POST</code>, <code>PUT</code>) the SDK provides transactional integrity management of the <code>Idempotency-Key</code> header.</p> <ul> <li> <p>First Try: Generates a new UUID as the value of the <code>Idempotency-Key</code> header when the key is not supplied manually.</p> </li> <li> <p>Retrying: If a connection issue occurs, you must retry the payment with the same <code>Idempotency-Key</code> so that the payment is processed only once. <sup>4</sup>, <sup>5</sup></p> </li> </ul>"},{"location":"references/07_sdk_typescript/#21-securely-submitting-payments-manual-retry-example","title":"2.1. Securely Submitting Payments (Manual Retry Example)","text":"<pre><code>const requestKey = crypto.randomUUID();\nconst achRequest: AchPaymentRequest = {\n  sourceAccountId: '...',\n  recipientDetails: { /*... */ },\n  amount: 500.25,\n  effectiveDate: '2025-11-05',\n};\n\nasync function createPaymentWithRetry(key: string, request: AchPaymentRequest) {\n  try {\n    const response = await client.payments.createAch(request, {\n      idempotencyKey: key, // Provide key for idempotency guarantee\n    });\n    console.log('Payment accepted. Status:', response.status);\n    return response;\n  } catch (error) {\n    if (error instanceof IdempotencyKeyConflictError) {\n      // The API returned a 409 Conflict. **DO NOT** retry the submission.\n      console.warn(`Idempotency conflict detected. Reason: ${error.detail}`);\n      // Recommended: Check status using GET /payments/{id}\n    } else if (error instanceof PermissionDeniedError) {\n      // The API returned a 403 Forbidden.\n      throw new Error('Unauthorized API call. Check scopes.');\n    } else {\n      // Catch other errors (e.g., QBankServiceUnavailableError for 5xx)\n      throw error;\n    }\n  }\n}\ncreatePaymentWithRetry(requestKey, achRequest);\n</code></pre>"},{"location":"references/07_sdk_typescript/#3-type-safety-and-structured-errors-developer-experience","title":"3. Type Safety and Structured Errors (Developer Experience)","text":"<p>Using strong type checking (e.g. Zod Schemas), the SDK makes the inputs and outputs of APIs explicit, thus enabling errors to be caught while developing (in the IDE) instead of at runtime. <sup>1</sup></p> <p>In addition to translating all status code based API errors (e.g. 400, 403, 409) to Named Error Classes (<code>IdempotencyKeyConflictError</code>, <code>PermissionDeniedError</code>), this abstraction enables developers to programmatically handle failures using <code>try/catch</code> blocks without having to parse raw HTTP status codes or error messages. <sup>1</sup></p>"},{"location":"references/07_sdk_typescript/#documents-cited","title":"Documents Cited","text":"<ol> <li> <p>QBank TypeScript SDK Readme, \"Core Features and Design Principles (Developer Experience).\"\u00a0\u21a9\u21a9\u21a9</p> </li> <li> <p>TypeScript SDK Source Code, <code>src/client.ts</code> (Client Initialization).\u00a0\u21a9</p> </li> <li> <p>OAuth 2.0 Client Credentials Flow, RFC 6749 (Token Lifecycle).\u00a0\u21a9</p> </li> <li> <p>API Design Guidelines, \"Idempotency and Network Failure Handling.\"\u00a0\u21a9</p> </li> <li> <p>QBank Connect API Reference, \"Idempotency-Key Requirements.\"\u00a0\u21a9</p> </li> </ol>"},{"location":"references/08_compliance_security/","title":"Compliance &amp; Security Manual","text":"<p>Maintaining the highest level of security &amp; auditing for FinTech integrations is required. QBank Connect is compliant with both SOX &amp; PCI DSS standards.</p>"},{"location":"references/08_compliance_security/#1-audit-logging-requirements-sox-pci","title":"1. Audit Logging Requirements (SOX / PCI)","text":"<p>A comprehensive audit log must exist for each financial activity. Each API call, system status change &amp; mETL action is captured in an immutable, structured format (JSON).<sup>1</sup> <sup>2</sup></p>"},{"location":"references/08_compliance_security/#11-mandatory-audit-log-fields","title":"1.1. Mandatory Audit Log Fields","text":"<p>To provide auditable evidence, the logs contain:</p> Field Description Compliance Context <code>timestamp</code> Time recorded in UTC with millisecond accuracy.<sup>2</sup> <sup>8</sup>. SOX (Audit Trail) <code>actor</code> The authenticated Client ID or User Identity.<sup>8</sup>. SOX (User Accountability) <code>entity_impacted</code> The impacted Account ID, Payment ID, etc.<sup>8</sup>. SOX (Data Accountability) <code>request_id</code> Unique request ID for end-to-end tracing purposes.<sup>9</sup> <sup>8</sup>. PCI DSS (Troubleshooting / Investigation) <code>idempotency_key</code> Required for all transactional attempts (if applicable).<sup>10</sup>. SOX (Audit Trail)"},{"location":"references/08_compliance_security/#12-non-repudiation-header","title":"1.2. Non-Repudiation Header","text":"<p>For all transactional requests (POST, PUT, PATCH), a highly recommended audit compliance header should be used for each request that initiates from a user interface within the ERP.</p> Header Name Value Format Description <code>x-fapi-auth-date</code> HTTP-date (e.g., Tue, 11 Sep 2012 19:43:31 GMT) The date/time the end-user (PSU) last authenticated with the client application.<sup>11</sup>."},{"location":"references/08_compliance_security/#2-secure-transport-and-applications","title":"2. Secure Transport and Applications","text":"<p>The following mandatory security policies apply to how you connect to QBank Connect to secure the data transport pipeline, and provide appropriate access to your environment.</p>"},{"location":"references/08_compliance_security/#21-tls-enforcement","title":"2.1. TLS Enforcement","text":"<p>All connections to QBank Connect MUST use HTTPS (TLS 1.2 or higher) to provide secure communication over the web. If a connection is made using a less secure version of TLS, it will be denied immediately at the API Gateway layer to prevent man-in-the-middle attacks.<sup>3</sup>. X.509 certificates are used to verify the identity of the client, and provide encryption.<sup>3</sup></p>"},{"location":"references/08_compliance_security/#22-role-based-access-control-rbac","title":"2.2. Role-Based Access Control (RBAC)","text":"<p>Access to the services provided by QBank Connect are based on the OAuth 2.0 scopes that have been assigned to your client_id upon registration (i.e. transactions.read vs payments.ach.write). If you attempt to make a request against a resource for which you do not have permission, you will receive a 403 Forbidden response.<sup>4</sup> <sup>5</sup></p>"},{"location":"references/08_compliance_security/#3-api-versioning-strategy","title":"3. API Versioning Strategy","text":"<p>QBank Connect employs a URL-based versioning strategy (i.e. /v1/).</p> <p>Major Version Changes (v1 to v2): These occur when breaking changes are introduced into the API (e.g. changing the structure of the payload, removing important fields, changing the way resources are routed through the API)<sup>6</sup>.</p> <p>Minor Versions: Any changes that are non-breaking (adding new endpoints, adding optional fields, etc.) will be added to the current version of the API and will remain backwards compatible with previous versions.<sup>7</sup> <sup>6</sup></p>"},{"location":"references/08_compliance_security/#4-documents-cited","title":"4. Documents Cited","text":"<ol> <li> <p>QBank Internal Systems Manual, \"Immutable Log Architecture.\"\u00a0\u21a9</p> </li> <li> <p>PCI DSS Requirement 10: Track and Monitor All Access to Network Resources and Cardholder Data.\u00a0\u21a9\u21a9</p> </li> <li> <p>NIST SP 800-52 Rev. 2: Guidelines for TLS Server Configuration.\u00a0\u21a9\u21a9</p> </li> <li> <p>QBank API Security Guide, \"OAuth 2.0 Scope and RBAC Policies.\"\u00a0\u21a9</p> </li> <li> <p>OAuth 2.0 Authorization Framework, RFC 6749 (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>QBank API Design Standards, \"Versioning Policy.\"\u00a0\u21a9\u21a9</p> </li> <li> <p>Semantic Versioning 2.0.0 (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>SOX Audit Control Requirements, Section 404 (Conceptual Reference).\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>Distributed Tracing Standard, W3C Trace Context (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>Idempotency Key Specification, RFC 8142 (Conceptual Reference).\u00a0\u21a9</p> </li> <li> <p>Open Banking (UK) Security Profile: FAPI Compliance and Authentication.\u00a0\u21a9</p> </li> </ol>"},{"location":"references/09_glossary/","title":"Glossary of Terms","text":"<p>This section provides definitions of all specialized terms and acronyms that are used throughout this documentation.</p> <p>ACH (Automated Clearing House)</p> <p>The main electronic funds transfer system for processing transactions in the United States. Used for payroll, direct deposits, bill payments and other types of transactions.</p> <p>Idempotence</p> <p>When an operation has idempotent properties, it can be run many times with the exact same parameters and produce the same results as if the operation was run one time, without any unintended side effects. This is crucial for maintaining the integrity of transactions in distributed systems.</p> <p>OAuth 2.0 Client Credentials Flow</p> <p>Authorization flow that is used when a client (such as an ERP system) acts on its own behalf, not on behalf of a user. Uses the client ID and client secret to get an access token.</p> <p>PCI DSS (Payment Card Industry Data Security Standard)</p> <p>Set of rules developed by Payment Card Industry to ensure that all organizations that collect, process, store, and/or transmit credit card information maintain a secure environment.</p> <p>SOX (Sarbanes-Oxley Act)</p> <p>Law passed by the US Congress which requires strict standards for all US public company boards, management and public accounting firms. Specifically, SOX dictates the need for internal controls, including detailed audit logs and non-repudiation for all financial transactions.</p> <p>TLS (Transport Layer Security)</p> <p>Cryptographic protocols designed to provide confidentiality and integrity for communication between two computers in a network. Must be implemented to enforce HTTPS and to protect data being transmitted from unauthorized parties.</p>"},{"location":"tutorials/01_getting_started/","title":"Getting Started","text":"<p>We can begin by using the OAuth 2.0 Client Credentials Grant to do B2B server-to-server authentication on behalf of our customers. This is perfect for our ERP clients because we need to allow them to have automatic, unattended access to their resources.</p>"},{"location":"tutorials/01_getting_started/#1-onboarding-process","title":"1. Onboarding Process","text":"<p>1.1. Registering: In order to get started, contact your QBank Account Manager to register your Platform. Your Account Manager will give you a unique <code>client_id</code> and a safe <code>client_secret</code>.</p> <p>1.2. Scope Approval: When registering, you will need to enter the specific permissions (scopes) that your application needs (i.e., <code>transactions.read</code>, <code>payments.ach.write</code>) as well as who has approval to make those requests.</p> <p>1.3. Storing Credentials: Securely store your <code>client_id</code> and <code>client_secret</code> in an environment vault (AWS Secrets Manager, Azure Key Vault).</p>"},{"location":"tutorials/01_getting_started/#2-using-oauth-20-client-credential-flow","title":"2. Using OAuth 2.0 Client Credential Flow","text":"<p>Use your <code>client_id</code> and <code>client_secret</code> to get a short-term Bearer Token from QBank.</p>"},{"location":"tutorials/01_getting_started/#21-get-an-access-token","title":"2.1. Get an Access Token","text":"<p>Send a <code>POST</code> to the token endpoint:</p> Field Value Endpoint <code>POST https://auth.qbankconnect.com/token</code> Content-Type <code>application/x-www-form-urlencoded</code> <p>Request Body (Form URL Encoded)</p> Parameter Description grant_type It needs to be <code>client_credentials</code>. client_id The unique ID provided when registering. client_secret The secret key provided when registering. scope The scope parameter needs to contain a space separated list of requested permissions (e.g., <code>accounts.read payments.ach.write</code>)."},{"location":"tutorials/01_getting_started/#22-processing-the-response","title":"2.2. Processing the Response","text":"<p>When sending a successful response, it includes the access token and the length of time (usually 3600 seconds/1 hour) the token remains valid.</p> <pre><code>{\n\"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n\"token_type\": \"Bearer\",\n\"expires_in\": 3600,\n\"scope\": \"accounts.read payments.ach.write\"\n}\n</code></pre>"},{"location":"tutorials/01_getting_started/#23-api-call-with-the-token","title":"2.3. API Call with the Token","text":"<p>You will need to include the <code>access_token</code> in the <code>Authorization</code> header of each API call after obtaining the access token.</p> Header Value <code>Authorization</code> <code>Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code> <p>All of these steps are included in the QBank SDKs (including renewal and token expiration), so you don't need to handle the token lifecycle yourself.</p>"},{"location":"tutorials/01_getting_started/#3-quick-start-retrieving-a-current-balance","title":"3. Quick Start: Retrieving a Current Balance","text":"<p>You can retrieve the most recent balance of an account by calling the <code>/balances</code> endpoint; the balance is current as of the previous business day.</p> Field Value Endpoint <code>GET /v1/balances/{accountId}</code> Scopes Required <code>balances.read</code> <pre><code>curl --location '[https://api.qbankconnect.com/v1/balances/a1b2c3d4-e5f6-7890-1234-567890abcde](https://api.qbankconnect.com/v1/balances/a1b2c3d4-e5f6-7890-1234-567890abcde)' \\\n--header 'Authorization: Bearer &lt;YOUR_ACCESS_TOKEN&gt;'\n</code></pre> <p>When making this request, you will receive a <code>200 OK</code> response and the available balance and ledger balance for the account.</p>"}]}